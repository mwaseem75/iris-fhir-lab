<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>IRIS FHIR Client</title>
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
    <link rel="icon" href="resources/img/icon.png" type="image/x-icon" />

    <!-- Fonts and icons -->
    <script src="resources/js/webfont.min.js"></script>
    <script type="text/javascript">
        WebFont.load({
            google: {
                "families": ["Lato:300,400,700,900"]
            },
            custom: {
                "families": ["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular",
                    "Font Awesome 5 Brands", "simple-line-icons"
                ],
                urls: ['resources/css/fonts.min.css']
            },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>

    <!-- CSS Files -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="resources/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="resources/css/atlantis.min.css">
    <link rel="stylesheet" type="text/css" href="resources/css/adminlte.min.css">
    <link rel="stylesheet" type="text/css" href="resources/css/datatables.min.css">
	<link rel="stylesheet" type="text/css" href="resources/css/buttons.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="resources/css/jquery.dataTables.min.css">

  <style>
        #search-box {   margin-bottom: 10px; } 
        .app-bg-color {background-color: #f5f5f5;
        margin-left: 0px;
        }     
        .list-group-item{padding: 0.10rem 0.75rem }  
        .nav-pills>li>.nav-link {
    		border: none;
    		color: #000000;
    		}  
    	table {
    width: 100%;
    border-collapse: collapse;
  }

  app-right-align {
    text-align: right;
    border: 1px solid #ddd; /* Optional: Add border for better visualization */
    padding: 8px; /* Optional: Add padding for better spacing */
  }	
 </style>

</head>

<body>
    <csp:class encoded=1 super="%CSP.Page,dc.FhirClient">
   
<script language="Cache" runat="Server">
	Set currentserver = ^ActiveFhirServer
	set resource = $Get(%request.Data("resource",1),"")  		
</script>
  		
   <div class="container-fluid">
        <!-- NavBar -->
        <nav class="navbar navbar-header navbar-expand-lg app-bg-color">
            
                <ul class="nav nav-pills">
                        <li class="nav-item">
                        <a class="nav-link" href="/csp/fhirclient/index.csp"><i class="bi bi-house-door"></i> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/csp/sys/%25CSP.Portal.Home.zen">Management Portal</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.hl7.org/fhir/">FHIR Official website</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://pypi.org/project/fhirpy/">FHIR Client Docs</a>
                    </li>		
                </ul>                              
        </nav>
        <!-- End Navbar -->
     
        <div class="row">
            <div class="col-lg-2 col-2">
                <!-- Customized Card -->
                <div class="card" style="margin-top: 10px;">                      
                <!-- /.card-header -->                           
                            <!-- Widget: user widget style 2 -->
                            <div class="card card-widget widget-user-2">
                                <!-- Add the bg color to the header using any of the bg-* classes -->
                                <div class="widget-user-header app-bg-color" style="padding:0.5rem; margin-left: 0px;">                                    
                                    <!-- /.widget-user-image -->
                                    <h6 class="text-center font-weight-bold">Common Resources</h6>
                                </div>                            
       
								    <ul class="list-group">
										<li class="list-group-item">Patient</li>
										<li class="list-group-item">Observation</li>
										<li class="list-group-item">Procedure</li>
										<li class="list-group-item">Encounter</li>
										<li class="list-group-item">Organization</li>
										<li class="list-group-item">Condition</li>
										<li class="list-group-item">Practitioner</li>
									</ul>   
  
   									<div class="widget-user-header app-bg-color" style="padding:0.5rem;margin-top: 10px;">                          
                                    <h6 class="text-center font-weight-bold" > All Resources</h6>
                                	</div>
										<div id="search-box" class="input-group">											
											<input type="text" id="search" class="form-control" placeholder="Search" onkeyup="filterList()">
										</div>
										<ul id="item-list" class="list-group">
										<script language="Cache" runat="Server">
											Set resourcesList = ..ListResources()
											Set list = $ListFromString(resourcesList,",")
											Set n = $ListLength(list)
											For i=1:1:n {
												Set resource = $List(list,i)
												Write "<li class=""list-group-item"">" _ resource _ "</li>"												
											}
									   </script>
										</ul>
                        </div>
                        <!-- /.table-responsive -->
                    </div>                  
            </div>
            
		    <div class="col-lg-6 col-6">
			     <div class="container">
                    <!-- Customized Card -->
                    <div class="card border-0" style="margin-top: 20px; border:none">                       
                        <!-- /.card-header -->
                            <div class="card-header">                                                                                           
                                 
                                <div class="widget-user-header" style="padding:0.5rem; margin-left: 0px;">                                    
                                    <!-- /.widget-user-image -->
                                    <h3 class="text-center">FHIR Servers</h3>
                                </div>     
                                 
                             		<table class="table table-hover">                            		
                             
 							        </table>           							                             
                            </div>           
                              
                            <div class="card-footer border-0">                                                                                           
                                 <div class="card-footer text-center">                                  
                                    <!-- /.widget-user-image -->
                                    <button type="button" class="btn btn-primary"><i class="bi bi-plugin"></i> Add FHIR Server</button>
                                </div>     
                            </div>
                        </div>
                        <!-- /.table-responsive -->
                    </div>                  
                </div>
            
             <div class="col-lg-4 col-4">
			     <div class="container">
                    <!-- Customized Card -->
                    <div class="card border-0" style="margin-top: 20px; border:none">                       
                        <!-- /.card-header -->
                            <div class="card-header">                                                                                           
                                 
                                <div class="widget-user-header" style="padding:0.5rem; margin-left: 0px;">                                    
                                    <!-- /.widget-user-image -->
                                    <h3 class="text-center">FHIR Servers</h3>
                                </div>     
                                 
                             		<table class="table table-hover">                            		
                             
 							        </table>           							                             
                            </div>           
                              
                            <div class="card-footer border-0">                                                                                           
                                 <div class="card-footer text-center">                                  
                                    <!-- /.widget-user-image -->
                                    <button type="button" class="btn btn-primary"><i class="bi bi-plugin"></i> Add FHIR Server</button>
                                </div>     
                            </div>
                        </div>
                        <!-- /.table-responsive -->
                    </div>                  
                </div>
                
                </div>  <!-- /.container -->
            </div>
            <!-- /.col -->
            <!-- PRODUCT LIST -->

        </div>
    
        <footer class="footer">
            <div class="container-fluid">
                <nav class="pull-left">
                    <ul class="nav">
                        <li class="nav-item">

                            2024, IRIS-FHIR-LAB

                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">

                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">

                            </a>
                        </li>
                    </ul>
                </nav>

            </div>
        </footer>
        </div>
        </div>

        </div>
        </div>
        <!--   Core JS Files   -->
        <script src="resources/js/jquery.min.js"></script>
		<script src="resources/js/jquery-ui.min.js"></script>
		
		<script src="resources/js/popper.min.js"></script>
        <script src="resources/js/bootstrap.min.js"></script>
        <!-- jQuery UI -->
        
        <script src="resources/js/jquery.ui.touch-punch.min.js"></script>
        <!-- jQuery Scrollbar -->
        <script src="resources/js/jquery.scrollbar.min.js"></script>
        <!-- Atlantis JS -->
        <script src="resources/js/atlantis.min.js"></script>
		<!-- Script Files -->
		
		<script src="resources/js/datatables.min.js"></script>
		<script src="resources/js/dataTables.buttons.min.js"></script>
		<script src="resources/js/jszip.min.js"></script>
		<script src="resources/js/pdfmake.min.js"></script>
		<script src="resources/js/vfs_fonts.js"></script>
		<script src="resources/js/buttons.html5.min.js"></script>
		
        
		<script type="text/javascript">

            $(document).ready(function () {               
                $('#observation-data').DataTable({
                    dom: 'Bfrtip',
                    buttons: [
                        'copyHtml5',
                        'excelHtml5',
                        'csvHtml5',
                        'pdfHtml5'
                    ]
                });
            });


	 function handleClick(serverID) {		 
		 var res =  #server(..SetFhirServer(serverID))#;
		 //alert("Favorite weird creature: " + getRadioButtonValue(document.aye.whichThing));
          window.location.reload();
         //event.preventDefault(); // disable normal form submit behavior
         //return false; // prevent further bubbling of event
      }
    

        </script>
        
        <script>
        	function filterList() {
				var input, filter, ul, li, i, txtValue;
				input = document.getElementById('search');
				filter = input.value.toUpperCase();
				ul = document.getElementById('item-list');
	            li = ul.getElementsByTagName('li');

				for (i = 0; i < li.length; i++) {
					txtValue = li[i].textContent || li[i].innerText;
					if (txtValue.toUpperCase().indexOf(filter) > -1) {
						li[i].style.display = '';
					} else {
						li[i].style.display = 'none';
					}
				}
        	}
    	</script>
</body>


</html>
